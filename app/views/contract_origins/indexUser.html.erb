

<h1>Listing your Contract at Origin </h1>

<table class="table">
  <thead>
    <tr>
      <th>Match id</th>
      <th>Sender</th>
      <th>Issigned driver</th>
      <th>Issigned sender</th>
      <th>Origin date</th>
      <th>Comment</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @contract_origins.each do |contract_origin| %>
      <tr>
        <td><%= contract_origin.matchID_id %></td>
        <td>
          <!--to know the sender-->
            <!--take match from contract at origin-->
            <% theMatch = Match.find(contract_origin.matchID_id)%>
              <!--take package from match-->
            <% thePackage =Package.find(theMatch.packageID_id)%>
            <!--check the owner-->
            <% sender = User.find(thePackage.user_id)%>
            <!--display the sender-->
            <%= sender.name%> <%= sender.surname%>
        </td>
        <td><%= contract_origin.isSigned_Driver %></td>
        <td><%= contract_origin.isSigned_Sender %></td>
        <td><%= (contract_origin.origin_date).strftime("%m/%d/%Y %I:%M%p") %></td>
        <td><%= contract_origin.comment %></td>
        
        <td><%= link_to 'Create Delivery Contract', new_delivery_order_path(:matchID_id => contract_origin.matchID_id) %></td>
        <!--<td>< %= link_to 'Show', contract_origin %></td>-->
        <!--<td>< %= link_to 'Edit', edit_contract_origin_path(contract_origin) %></td>-->
        <!--<td>< %= link_to 'Destroy', contract_origin, method: :delete, data: { confirm: 'Are you sure?' } %></td>-->
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Contract origin', new_contract_origin_path %>
